<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jxd.student_information.mapper.IStudentMapper">
    <select id="getAllStudent" resultType="map">
        select s.student_id,s.student_name,s.sex,s.folk,s.birthday,s.native_place,
        s.marital_status,s.id_number, s.graduate_school,s.major,s.img_path,
        s.remark,s.class_no,s.isdeleted,d.dept_name from student s
        left join dept d on s.dept_no = d.dept_no
        <where>
            s.isdeleted = 1
            <if test="student_name != null and student_name != '' ">
                and s.student_name like concat('%',#{student_name},'%')
            </if>
            <if test="class_no != 0">
                and s.class_no = #{class_no}
            </if>
        </where>
    </select>

    <select id="getAllStudentByPage" resultType="map">
        select s.student_id,s.student_name,s.sex,s.folk,s.birthday,s.native_place,
        s.marital_status,s.id_number, s.graduate_school,s.major,s.img_path,
        s.remark,s.class_no,s.isdeleted,d.dept_name from student s
        left join dept d on s.dept_no = d.dept_no
        <where>
            s.isdeleted = 1
            <if test="student_name != null and student_name != '' ">
                and s.student_name like concat('%',#{student_name},'%')
            </if>
            <if test="class_no != 0">
                and s.class_no = #{class_no}
            </if>
        </where>
        order by s.student_id limit #{pageIndex}, #{pageSize}
    </select>
</mapper>
